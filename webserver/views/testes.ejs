<!doctype html>
<html>
<head>
    <% include components/projectDefaultHead/projectDefaultHead %>
    <script type="text/javascript">
        function ajaxTest(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("POST","/posts/denunciarPost",true);
            xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");
            let conteudo = document.getElementById("conteudoDenuncia").value;
            let id = document.getElementById("inputIdDenuncia").value;
            xmlhttp.send("postID="+id+"&conteudoDenuncia="+conteudo);
            xmlhttp.onreadystatechange = function() {
                if(xmlhttp.readyState==4){
                    document.getElementById("close").click();
                }
            }
        }
    </script>
    <title>Testes</title>
</head>
<body>
<% include components/headerVisitante/headerVisitante.ejs%>

<div class="container">
    <% posts.forEach( post => { %>
        <% include components/posts/posts.ejs %>
    <% }) %>
</div>

<!-- MODAL PRA DENUNCIAR PUBLICAÇÃO -->
<div class="modal fade" id="denunciarPublicação" tabindex="-1" role="dialog" aria-labelledby="modalDenunciarPublicação" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Denunciar Publicação</h5>
                <button type="button" class="close" id="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
                <input type="hidden" id="inputIdDenuncia" name="postID">
                <div class="modal-body">
                    <input style="width: 100%; height: 4em;" placeholder="Qual o motivo de sua denúncia?" id="conteudoDenuncia" name="conteudoDenuncia" type="text" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-memeIO" onclick="ajaxTest()">Enviar denúncia</button>
                </div>
        </div>
    </div>
</div>

<% include components/footer/projectDefaultFooter.ejs %>
<% include components/projectDefaultScripts/projectDefaultScripts.ejs %>
</body>
</html>